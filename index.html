<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="RFFGen : A fast and easy to use function generation library that gives provides access to the first three derivatives of a (possibly matrix-valued) function.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>RFFGen</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/lubkoll/RFFGen">View on GitHub</a>

          <h1 id="project_title">RFFGen</h1>
          <h2 id="project_tagline">A fast and easy to use function generation library that gives provides access to the first three derivatives of a (possibly matrix-valued) function.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/lubkoll/RFFGen/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/lubkoll/RFFGen/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><a href="https://travis-ci.org/lubkoll/RFFGen/builds"><img src="https://travis-ci.org/lubkoll/RFFGen.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/lubkoll/RFFGen"><img src="https://coveralls.io/repos/lubkoll/RFFGen/badge.svg" alt="Coverage Status"></a></p>

<h1>
<a id="rffgen" class="anchor" href="#rffgen" aria-hidden="true"><span class="octicon octicon-link"></span></a>RFFGen</h1>

<p>A fast and easy to use function generation library that gives provides access to the first three derivatives of a function.</p>

<p>Function arguments can be matrices and/or scalars. Vectors are also possible but most functionality targets on matrices.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>This library is header-only and no installation is required.</p>

<p>If you want to run the available tests, you can use cmake:</p>

<ul>
<li>mkdir build</li>
<li>cd build</li>
<li>cmake ..</li>
<li>make</li>
</ul>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h1>

<p>Usage is illustrated using three different examples. Further examples can be found in RFFGen/Tests and RFFGen/Examples.</p>

<h3>
<a id="a-simple-example" class="anchor" href="#a-simple-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>A simple example</h3>

<p>We begin with the function</p>

<p><img src="http://latex.codecogs.com/gif.latex?f%28x%29%3D%5Csqrt%7Bx%5E3%7D+%5Csin%28%5Csqrt%7Bx%7D%29%3D%28h%5Ccirc%20g%29%28x%29" alt="equation"></p>

<p>with</p>

<p><img src="http://latex.codecogs.com/gif.latex?h%28x%29%3Dx%5E3+%5Csin%28x%29" alt="equation"></p>

<p>and</p>

<p><img src="http://latex.codecogs.com/gif.latex?g%28x%29%3D%5Csqrt%7Bx%7D" alt="equation"></p>

<pre><code>#include "RFFGen.hh"

auto generateFunction()
{
  using namespace RFFGen::CMath;

  auto h = Pow&lt;3&gt;() + Sin();
  auto g = Sqrt();

  return RFFGen::finalize_scalar( h(g) );
}
</code></pre>

<p>Usage is as follows:</p>

<pre><code>auto f = generateFunction();

f.update(1.) //  change function argument

auto value = f(); // or f.d0()
auto firstDerivative  = f.d1();
auto secondDerivative = f.d2();
auto thirdDerivative  = f.d3();
</code></pre>

<p>The call to <code>finalize_scalar</code> is necessary to simplify usage of the generated function. Without usage is slightly less convenient as illustrated in the other examples below. </p>

<h3>
<a id="an-example-from-biomechanics" class="anchor" href="#an-example-from-biomechanics" aria-hidden="true"><span class="octicon octicon-link"></span></a>An example from biomechanics</h3>

<p>Now let us generate the function</p>

<p><img src="http://latex.codecogs.com/gif.latex?W%28F%29%3D%20c_%7BCells%7D%28%5Ciota_1-3%29+%20%5Cfrac%7Bk_1%7D%7Bk_2%7D%5Cexp%28k_2%5B%5Ckappa%5Ciota_1+%281-3%5Ckappa%29%5Ciota_4-1%5D%5E2-1%29" alt="equation"></p>

<p>which constitutes a model for adipose tissue. In this context the invariants depend on the left Cauchy-Green strain tensor. Its implementation is</p>

<pre><code>#include "RFFGen.hh"

template &lt;class Mat&gt;
auto generateAdiposeTissue(double cCells, double k1, double k2,
             double kappa, const Matrix&amp; M, const Matrix&amp; F)
{
  using namespace RFFGen::LinearAlgebra;
  using RFFGen::CMath::exp;
  using RFFGen::finalize;

  auto i1 = FirstPrincipalInvariant&lt;Matrix&gt;();
  auto si1 = ShiftedFirstPrincipalInvariant&lt;Matrix&gt;();
  auto i4 = FirstMixedInvariant&lt;Matrix&gt;(F,M);

  auto aniso = kappa*i1 + (1-3*kappa) * i4 - 1;
  auto materialLaw = cCells*si1 + (k1/k2) * ( exp(aniso^2) - 1 );

 return finalize( materialLaw( LeftCauchyGreenStrainTensor&lt;Matrix&gt;(F) ) );
}
</code></pre>

<p>Usage is as follows (assuming that the material parameters, the structural tensor M, the deformation gradient F and perturbations dF0, dF1, dF2 of the latter are given):</p>

<pre><code>auto f = generateAdiposeTissue(cCells,k1,k2,kappa,M,F);

f.update(F) //  change function argument

double value = f(); // or f.d0()
double firstDerivative  = f.d1(dF0);
double secondDerivative = f.d2(dF0,dF1);
double thirdDerivative  = f.d3(dF0,dF1,dF2);
</code></pre>

<p>Observe that the derivatives are DIRECTIONAL derivatives. This approach admits to work with any (reasonable) input types. In the first example, where the input variable was a scalar, the call to finalize_scalar did generate 
suitable default values for the directions. Here this is not admissible. </p>

<p>Take care to not use functions such as 'exp' with built-in arithmetic types, since in this case the corresponding functions from  are called and the resulting value is treated as constant.</p>

<h3>
<a id="an-example-with-two-variables" class="anchor" href="#an-example-with-two-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>An example with two variables</h3>

<p>Eventually we consider a function with two variables, a scalar variable x and a matrix valued variable F.</p>

<p><img src="http://latex.codecogs.com/gif.latex?f%28x%2CF%29%3D%5Csqrt%7Bx%7D%5Cmathrm%7Btr%7D%28F%29" alt="equation"></p>

<pre><code>#include "RFFGen.hh"

template &lt;class Mat&gt;
auto generateFunction()
{
  using RFFGen::CMath::sqrt;
  using RFFGen::LinearAlgebra::trace;
  using RFFGen::Variable;

  auto x = Variable&lt;double,0&gt;();
  auto F = Variable&lt;Mat,1&gt;();

  return RFFGen::finalize( sqrt(x)*trace(F) );
}
</code></pre>

<p>When computing derivatives we now have to specify the variable ids for which the derivative will be computed. The same holds for setting the function values.</p>

<pre><code>auto f = generateFunction&lt;Mat&gt;();

f.template update&lt;0&gt;(x);
f.template update&lt;1&gt;(F);

double value       = f(); // or f.d0()
double df_dx       = f.template d1&lt;0&gt;(dx1);
double df_dF       = f.template d1&lt;1&gt;(dF)
double ddf_dFdx    = f.template d2&lt;1,0&gt;(dF,dx1);
double dddf_dxdxdF = f.template d3&lt;0,0,1&gt;(dx1,dx2,dF);
</code></pre>

<p>Contact: <a href="mailto:lars.lubkoll@posteo.de">lars.lubkoll@posteo.de</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">RFFGen maintained by <a href="https://github.com/lubkoll">lubkoll</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
